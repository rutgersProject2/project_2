<!DOCTYPE html>
<html>

<head>
    <title>Verify</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="./assets/css/style.css" type="text/css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <script src="https://use.fontawesome.com/a7aa792cdb.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Anton|Leckerli+One|Montserrat|Yellowtail" rel="stylesheet">
</head>

<body class="body">
    <div id="phoneModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title text-center">LOGIN</h4>
                </div>
                <div class="modal-body">
                    <input placeholder="Enter USER ID" id="loginUserID">
                </div>
                <div class="modal-footer">
                    <button type="button" id="submitUser" class="btn btn-default" data-dismiss="modal">Submit</button>
                </div>
            </div>
        </div>
    </div>
    <div id="cameraModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <video id="scan"></video>
            </div>
        </div>
    </div>
    <!-- <div class="container"> -->
    <div class="row">
        <div class="col-sm-12 text-center">
            <h2 id="app_name">Verify
                <span>
                    <img id="logo" src="assets/img/verify-logo-eee.png" height="35px" width="35px">
                </span>
            </h2>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="text-center" id="qrPlaceholder">
            </div>
        </div>
    </div>
    <!-- <div class="row">
        <div class="col-sm-5">
            Camera
        </div>
        <div class="col-sm-5">
            History
        </div>
    </div> -->
    <!-- </div> -->
    <!-- <footer> -->
        <div class="row">
            <div class="col-sm-12">
                <div class="text-left">
                    <a id="camera">
                        <i class="fa fa-plus-square-o" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
        </div>
    <!-- </footer> -->
    <script type="text/javascript">
    $(window).on('load', function() {
        $('#phoneModal').modal('show');
    });
    $("#submitUser").on("click", function(e) {
        e.preventDefault();
        var id = $("#loginUserID").val().trim();
        $.ajax("/api/mobile/" + id, {
            type: "GET"
        }).done(
            function(response) {
                $("#qrPlaceholder").html("<img src= '" + response + "'>")
            }
        )
    });
    $("#camera").on("click", function() {
        $("#cameraModal").modal('show');
    })

    // instascan stuff

    // let scanner = new Instascan.Scanner({ video: document.getElementById('scan') });
    // scanner.addListener('scan', function (content) {
    //     console.log(content);
    // });
    // Instascan.Camera.getCameras().then(function (cameras) {
    //     if (cameras.length > 0) {
    //         scanner.start(cameras[0]);
    //     } else {
    //         console.error('No cameras found.');
    //     }
    // }).catch(function (e) {
    //     console.error(e);
    // });
    </script>
</body>
<style>
/*.modal {
    background: black;
    color: white;
}

body {
    text-align: center;
    background: white;
}*/

body {
    background-color: #95cdd0;
}

#qrPlaceholder {
    margin-top: 200px;
}

#app_name {
    margin-top: 25px;
}
</style>

</html>